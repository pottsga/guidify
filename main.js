/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var y=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var P=(o,n)=>{for(var t in n)y(o,t,{get:n[t],enumerable:!0})},I=(o,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of w(n))!v.call(o,i)&&i!==t&&y(o,i,{get:()=>n[i],enumerable:!(r=S(n,i))||r.enumerable});return o};var T=o=>I(y({},"__esModule",{value:!0}),o);var M={};P(M,{default:()=>d});module.exports=T(M);var s=require("obsidian"),U={mySetting:"default",baseDir:"",ignorePeriodicNames:!0},d=class extends s.Plugin{async onload(){await this.loadSettings(),this.registerEvent(this.app.vault.on("create",t=>{(async()=>{if(!(t instanceof s.TFile))return;let i=(this.settings.baseDir||"").trim().replace(/^\/+/g,"").replace(/\/+$/g,"");if(!i)return;let h=t.path.split("/");if(h.slice(0,-1).join("/")!==i||t.extension!=="md")return;let l=h[h.length-1],f=l.replace(/\.[^/.]+$/,"");/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(f)||setTimeout(async()=>{let g=this.app.vault.getAbstractFileByPath(t.path);if(!(!g||!(g instanceof s.TFile)))try{let u=await this.app.vault.read(g);if(/<%[\s\S]*?%>/.test(u)){console.log("Skipping GUID rename because templater-like tags were detected in",g.path);return}let a=f;if(this.settings.ignorePeriodicNames){let e=null;if(/^Yearly/i.test(a)?e="Yearly":/^Quarterly/i.test(a)?e="Quarterly":/^Monthly/i.test(a)?e="Monthly":/^Weekly/i.test(a)?e="Weekly":/^Daily/i.test(a)?e="Daily":/^\d{4}$/.test(a)?e="Yearly":/^\d{4}-Q[1-4]$/.test(a)?e="Quarterly":/^\d{4}-\d{2}$/.test(a)?e="Monthly":/^\d{4}-W\d{2}$/.test(a)?e="Weekly":/^\d{4}-\d{2}-\d{2}$/.test(a)&&(e="Daily"),e){console.log("Skipping GUID rename for periodic note:",a,"match=",e);return}}let c="",p=globalThis;p.crypto&&typeof p.crypto.randomUUID=="function"?c=p.crypto.randomUUID():c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let D=Math.random()*16|0;return(e==="x"?D:D&3|8).toString(16)});let m=l.includes(".")?l.substring(l.lastIndexOf(".")):"",b=(i?i+"/":"")+c+m;try{await this.app.fileManager.renameFile(g,b),new s.Notice(`Renamed ${l} \u2192 ${c}${m}`)}catch(e){console.error("Failed to rename file to GUID:",e)}}catch(u){console.error("Error reading file before GUID rename:",u)}},1500)})()})),this.addSettingTab(new x(this.app,this)),this.registerInterval(window.setInterval(()=>console.log("setInterval"),5*60*1e3))}onunload(){}async loadSettings(){this.settings=Object.assign({},U,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},x=class extends s.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this;t.empty(),new s.Setting(t).setName("Base directory").setDesc('Path relative to the vault root to use as the base directory (e.g., "Folder/Subfolder"). Leave empty to use the vault root. This is the only place that files will be renamed.').addText(r=>r.setPlaceholder("e.g. Folder").setValue(this.plugin.settings.baseDir||"").onChange(async i=>{this.plugin.settings.baseDir=i.trim(),await this.plugin.saveSettings()})),new s.Setting(t).setName("Ignore periodic names").setDesc("When enabled, notes whose title looks like Daily/Weekly/Monthly/etc. will not be renamed to GUIDs.").addToggle(r=>r.setValue(this.plugin.settings.ignorePeriodicNames).onChange(async i=>{this.plugin.settings.ignorePeriodicNames=i,await this.plugin.saveSettings()}))}};
